<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1- transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Syntax Highlight Help</title>
    <meta charset="UTF-8">
    <meta name="AppleTitle" content="Syntax Highlight Help"/>
    <meta name="description" content="Syntax Highlight Preferences">
    <meta name="robots" content="index, anchors" /> 
    <link rel="stylesheet" type="text/css" href="../css/main.css" />
</head>
<body>
    <a name="SyntaxHighlight_PREFERENCES"></a>

    <div class="header"><a href="help:anchor=SyntaxHighlight_INDEX bookID=org.sbarex.SourceCodeSyntaxHighlight.help">index</a></div>
    
    <h1>Preferences</h1>
    <div><img src="images/settings.png" alt="Preferences Window" /></div>
    <p>It is possible to set the preferences for all supported file type (global preferences). Then you can override single settings for customize only the output for some specific source format.</p>

    <p>From the list on the left side of the preferences window you can choose the global settings or the settings for a specific source file format.</p>
    <p>For an explanation on the behavior of file types <a href="help:anchor=SyntaxHighlight_UTI bookID=org.sbarex.SourceCodeSyntaxHighlight.help">click here</a>.</p>
    <p>The gray-out items on the list are those currently managed by others UTI. Clicking on the exclamation mark icon you will show which UTI is used for a given file extension.<p>

    <div><img src="images/settings_specific_warn.png" alt="Specific preferences warning" /></div>

    <p>The settings are stored in <code>~/Library/Preferences/org.sbarex.SourceCodeSyntaxHighlight.plist</code>.
        Customized themes and styles are saved in <code>~/Library/Application Support/Syntax Highlight/Themes|Styles</code> folders. </p>
    <p>Some file formats (.class, .json, .plist, .strings, etc.) have some predefined custom settings.</p>
    <p>Inside the folder <code>~/Library/Application Support/Syntax Highlight/defaults/</code> (you may need to create it if is missing), you can also put a custom settings for specific uti format creating a plist file named with the uti name.<br />
    The plist can have any of this settings:</p>
    <table>
        <tr><th>name</th><th>type</th></tr>
        <tr><td><a href="#preprocessor">preprocessor</a></td><td>string</td></tr>
        <tr><td><a href="#syntax"></a>syntax</a></td><td>string</td></tr>
        <tr><td><a href="#extra"></a>extra</a></td><td>string</td></tr>
    </table>

    

    <h2>Global preferences</h2>
    <a name="SyntaxHighlight_GLOBAL_PREFERENCES"></a>

    <p>Selecting the <i>Global</i> item on the left list you can customize the base settings for all supported file formats.</p>
    
    <div><img src="images/settings_global.png" alt="Global settings" /></div>

    <table>
        <tr>
            <td>Highlight</td>
            <td>Path of the <code>highlight</code> utils. You can choose the embedded version or select a different version (compiled by hand or installed with homebrew for example).</td></tr>
        <tr>
            <td>Output mode</td>
            <td>Output mode in <i>html</i> or <i>rtf</i>. Html output is rendered inside a WKWebView. Rtf output is rendered inside a NSTextView.<br />
                <small>(corresponds to <i>--out-format</i> highlight argument)</small>
            </td>
        </tr>
        <tr>
            <td>Data limit</td>
            <td>Maximum amount of data to format, data beyond the limit is omitted. Specify 0 to not limit. Note that if is set a <a href="#preprocessor">preprocessor</a>, the filter is applied to the his output and not to the source file.</td>
        </tr>
        <tr>
            <td>Debug</td>
            <td>If on, create on your desktop two file with the result of last rendering:
                    <ul>
                        <li><i>colorize.log</i>: log of the colorize operations</li>
                        <li><i>colorize.[html|rtf]</i> output of the syntax highlight show in the quicklook window.</li>
                    </ul>
            </td>
        </tr>
    </table>

    <h2>Appearance preferences</h2>
    <a name="SyntaxHighlight_APPEARANCE_PREFERENCES"></a>

    <p>The appearance panel allow to customize the appearance of the rendered source files.</p>
    
    <div><img src="images/settings_appearance.png" alt="Appearance settings" /></div>

    <table>
        <tr>
            <td>Theme</td>
            <td>You can choose a theme for light and dark style of the MacOS. The list of theme is automatically generated querying <code>highlight</code>.<br />
            <small>(corresponds to <i>--style</i> highlight arguments)</small>
        </td>
        <tr>
            <td>Custom style</td>
            <td>For <i>html</i> output mode you can set a custom css style to override the theme settings. <br/>
            Custom style is saved on the application support folder.
        </td>
        </tr>
        <tr>
            <td>Font</td>
            <td>Font family and size to use in the output. Depending on the theme chosen, italic and bold style may be applied to certain elements.<br />
                <small>(corresponds to <i>--font</i> and <i>--font-size</i> highlight arguments)</small></td>
        </tr>
        <tr>
            <td>Word wrap</td>
            <td><small>(corresponds to <i>-V</i>, <i>-W</i> and <i>--line-length</i> highlight arguments)</small></td>
        </tr>
        <tr>
            <td>Line numbers</td>
            <td><small>(corresponds to <i>--line-numbers</i> and <i>--wrap-no-numbers</i> highlight arguments)</small></td>
        </tr>

        <tr>
            <td>Tabs</td>
            <td>Set if the tabs must be converted to space. Setting to zero disable tabs conversions.</br />
                <small>(corresponds to <i>--replace-tabs</i> highlight argument)</small></td>
        </tr>
    </table>

    <h2>Extra preferences</h2>
    <a name="SyntaxHighlight_EXTRA_PREFERENCES"></a>

    <p>This section allow to customize extra advanced settings.</p>
    
    <div><img src="images/settings_extra.png" alt="Extra settings" /></div>
    <table>
        <tr>
            <td>Interactive preview</td>
            <td>If enabled allow the execution of javascript code inside the quicklook preview. Enable only when in extra arguments you use a custom plugins that embed JS code inside the <code>highlight</code> output.<br />
            When enabled you cannot drag the quicklook panel with click and drag on the window but only dragging the title bar. Also double click action to open the file is disabled.<br />
            Is valid only <i>html</i> output mode.</td>
        </tr>

        <tr>
            <td><a name="extra">Arguments</a></td>
            <td>Any <code>highlight</code> additional arguments. Please don't provide arguments handled by the preferences GUI.</br />
                <b>Each parameter value that contains spaces must be protected within single quotes. </b>Eg <code>--doc-title='title with space'</code>.<br />
                <small>(see <code>man highlight</code> to a list of valid arguments and plugins)</small></td>
        </tr>
        <tr>
            <td>Append arguments <small>(only for custom UTI settings)</small></td>
            <td>Allow to set extra arguments to be appended to the global arguments. The note for the global arguments are also valid for this field.</td>
        </tr>
        <tr>
            <td><a name="preprocessor">Pre processor</a> <small>(only for custom UTI settings)</small></td>
            <td>Set a program to preprocess the source file before the formatting. <br />
                The preprocessor handle the source file before it is elaborated by <code>highlight</code>. <br />
                Preprocessor can be any cli utility or shell script that output to stdout the data to be passed to <code>highlight</code>. <br />
                For specify the name of the source file you <b>must</b> pass the placeholder <code>$targetHL</code>. <br />
                Preprocessor can be useful to convert a format into another (eg from binary to text), decompile, pretty printingâ€¦<br />
                The execution of the preprocessor is made inside the same env of the script that handle <code>highlight</code>.
                <table>
                    <tr><th>env</th><th>note</th></tr>
                    <tr><td>debugHL</td><td>If is not empty enable the output of the log to the file <code>~/Desktop/colorize.log</code>.</td></tr>
                    <tr><td>targetHL</td><td>Path of the file to colorize.</td></tr>
                    <tr><td>pathHL</td><td>Path of the <code>highlight</code> executable.</td></tr>
                    <tr><td>cmdOptsHL</td><td>Array with the arguments passed to the <code>highlight</code> executable.</td></tr>
                    <tr><td>themeHL</td><td>Highlight theme to be used.</td></tr>
                    <tr><td>syntaxHL</td><td>If defined force the use of this language to recognize the target file.</td></tr>
                    <tr><td>maxFileSizeHL</td><td>If defined, is the file size limit (in bytes) after apply a trim. The limit is applied to the output of the preprocessor and not to the contents of the source file.</td></tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><a name="syntax">Syntax</a> <small>(only for custom UTI settings)</small></td>
            <td>Set which language must be used to recognize the source file <small>(corresponds to <i>--syntax</i> highlight arguments)</small>.</td>
        </tr>
    </table>
</body>
</html>
